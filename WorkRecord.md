# 工作记录

## Week1 3.19-3.25

### 会议纪要 M1 - 3.22

* ~~学习了三教教师休息室门锁的开启方式~~

* 修改周报模板，重新规划了整体进度安排

* 讨论了用户端、系统端的功能，其中包括界面的初步设计

  * 用户端

  <img src="WorkRecord.assets/image-20210324150528404.png" alt="image-20210324150528404" style="zoom: 10%;" />
  
  * 系统端

<img src="WorkRecord.assets/image-20210324150550925.png" alt="image-20210324150550925" style="zoom: 10%;" />



### 本周人员分工

本周需要完成项目概述、用户端需求、管理端需求

| 人员   | 工作                             | 进展     |
| ------ | -------------------------------- | -------- |
| 乐洋   | 3.2，3.3.2，3.3.3；周报、汇报ppt | 完成初稿 |
| 史鑫杰 | 3.4                              | 完成初稿 |
| 开聚实 | 3.1，3.2                         | 完成初稿 |
| 王肇凯 | 1，2                             | 完成初稿 |
| 王佳瑞 | 3.1，3.3.1                       | 完成初稿 |
| 李永毅 | 2，程序设计草图                  | 完成初稿 |



## Week2 3.26-4.1

### TODO

* 需求文档相关

- [x] 在功能性需求中增加分享功能
- [x] 调整周报整体计划
- [x] 调整个性化推荐需求
- [x] 增加文档历史版本
- [x] 完成非功能性需求
- [x] ~~完成外围系统接口和数据字典（optional，可以改为在设计文档中撰写）~~
- [x] 【everybody】完整阅读、修订需求文档
- [x] ~~画火柴小人图~~

* 开发相关【everybody】

- [x] 学习小程序开发[起步](https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/)章节、下载微信开发者工具
- [x] ~~配置服务器后端 （若课程组已提供服务器）~~
- [x] 分别创建前端及后端代码仓库
- [x] 了解后端框架

* 会议计划讨论内容
- [x] 项目名称（中文、英文全称、英文简称）
- [x] 需求文档剩余部分撰写思路（非功能性需求等）
- [x] 需求文档修订内容
- [x] 简单学习小程序开发入门
- [x] 对系统开发进行**初步**分工，小程序前端、小程序后端、前后端交互、推荐算法模型、博雅爬虫、管理端等

  - 后期需要轮换





### 会议纪要 M2 - 3.28

* 对照需求问题总结，讨论了需求文档已完成部分的问题，以及未完成部分的思路，简单看了下数据库基本表设计

* 简单看了下小程序前端quickstart，讨论了后端框架

* 确定了本周修改需求文档的具体分工

* 推荐算法draft

输入：

相似性：关注的组织（的描述和版块）、参与的活动（的描述和标签）

热度要求：参与人数，活动打分、…

输出：可能喜欢的组织、活动



### 本周人员分工

| 人员     | 工作                                                         | 进展                           |
| -------- | ------------------------------------------------------------ | ------------------------------ |
| 乐洋     | 修改组织管理员、账户；完成推荐算法部分                       | 完成                           |
| 史鑫杰   | 修改超级管理员；周报、评审ppt                                | 完成对3.4的修改                |
| 开聚实   | 修改组织；                                                   | 完成                           |
| 王肇凯   | 修改活动、普通用户；完成5                                    | 完成                           |
| 王佳瑞   | 修改通知；                                                   | 完成                           |
| 李永毅   | 修改其他、评论；完成4                                        | 完成                           |
| 全体成员 | 完整检查需求文档、检查评审ppt；前端教程、后端框架、找一些示例项目 | 完成需求文档修改、寻找示例项目 |



## Week3 4.2-4.8

### TODO

* 需求文档遗留问题

- [x] 为每种用户绘制流程图
- [x] 导出word，调整格式并提交（ddl周一晚）

* 小程序前端

- [x] 阅读小程序官方文档
- [x] 设计基本主题样式
- [x] 选择UI组件（例如按键等）
- [x] 配置其他全局信息，包括js脚本、json
- [x] 根据页面设计草图和讨论结果，编写每个页面的大致框架（用注释表明页面内容即可），在文档中简要记录页面跳转关系
  - [ ] 注释写明页面内容
  - [x] 记录页面跳转关系
- [x] 使用微信API完成用户授权登录功能，以及邮箱认证
  - [ ] 邮箱认证
- [ ] 完成交互接口设计表格（邮箱认证、用户账户信息、……TODO）

* 管理端前端

- [ ] 替换模板html的菜单内容
- [ ] 编写js脚本，设计交互接口

* 服务器后端

- [x] 确定后端框架
- [x] 学习框架知识
- [x] 建立系统数据库
- [x] 完成数据库基本表

* 其他

- [x] 完成博雅爬虫脚本

* 会议计划讨论内容

- [x] 小程序页面（如底栏设计、包含哪些页面、跳转关系）
- [x] 主题样式（寻找模板）
- [x] 确定后端框架
- [x] 进行前端、后端的具体分工
- [x] 确定reference，链接更新至`README.md`，笔记更新至`FrondEnd_Notes.md`和`BackEnd_Notes.md`
  * 阅读的教程范围
  * 参考的示例项目范围
  * 可使用的工具（如UI组件）范围



### 会议纪要 M3 - 4.3

* 确定了前端后端的具体分工
* 确定了小程序前端UI采用[Vant](https://github.com/youzan/vant-weapp)，管理端前端UI采用[X-admin](https://gitee.com/daniuit/X-admin)
* 确定了后端使用django框架，暂时部署在本地
* 讨论了小程序界面设计的改进方案，未确定最终结果
* 讨论了博雅爬虫（关于selenium在服务器上的可行性，及request的问题）



### 本周人员分工

| 人员     | 工作                                                         | 进展         |
| -------- | ------------------------------------------------------------ | ------------ |
| 乐洋     | 博雅爬虫；小程序前端（微信登录、邮箱认证）                   | 完成博雅爬虫 |
| 史鑫杰   | 博雅爬虫；web前端4.16                                        | 完成博雅爬虫 |
| 开聚实   | 周报、汇报ppt；小程序前端（设计交互）                        | 完成         |
| 王肇凯   | 需求文档终版；小程序前端（页面代码）                         | 完成         |
| 王佳瑞   | 后端（建数据库、写基本表）                                   | 完成         |
| 李永毅   | 后端（建数据库、写基本表）                                   | 完成         |
| 全体成员 | 学习前端知识（js、小程序文档）、后端知识（框架、数据库），前（后）端人员优先看前（后）端 | 完成         |

* ddl：周三晚之前完成展示所需内容
  * 前端：界面，最好能交互（放个二维码）
  * 后端：代码截图、数据库基本表设计
  * 博雅：代码截图、示例结果



## Week4 4.9-4.15

### 周报上的本周任务

* [ ] 用户端实现用户信息编辑功能
* [ ] 用户端实现组织加入、退出功能
* [ ] 管理端实现管理员注册、登录功能
* [ ] 管理端实现用户管理功能

### TODO

* 遗留问题
- [x] 整体计划：进行中
- [x] ddl分散到天
- [x] alpha版：核心功能

* 服务器部署
* [x] 域名`www.reedsailing.xyz`备案
  * 该域名已由wzk购买，且已解析到服务器ip，ssl证书文件存放在`/root/ssl`下
  * 后续web端网页也可以解析到该网址
* [x] 在小程序平台“开发设置—服务器域名”中增加本域名
* [ ] 在服务器端配置域名访问，使得小程序可以通过`request('www.reedsailing.xyz/sendVerifyxxx')`来与后端交互
  * uwsgi, nginx, django, mysql等已安装完毕，但uwsgi和nginx需要配置才能运行
  * **参考链接：[【1】](https://www.cnblogs.com/Ph-one/p/11705799.html) [【2】](https://blog.csdn.net/sinat_38682860/article/details/85312588)  [【3】](https://www.imooc.com/article/42569?block_id=tuijian_wz)**

* 小程序前端

* [x] 为实现用户信息编辑和组织加入退出功能，本周需要完成的页面有：`3 4 7 8 9 11 14 18`
  * 实际上周报里未安排组织创建、管理相关的ddl，因此与**加入(关注)、退出组织相关的应优先完成**（`3 4 8 9 14` ），这时可以先提前在后端设几个组织以便先完成普通用户的功能
  * `7 11 14`优先度较低但也尽早，23号交还有概要
  * [x] 为每个页面完成wxml页面结构
  * [ ] 选定统一的一套UI组件（vant中每一类最好各选一个），将其wxss加入到前端代码中
  * [x] 完成每个页面的响应事件（例如点击按钮）、后端交互的js脚本
* [ ] 提前设计好和后端交互的格式（传入和返回的json）
* [x] 上周遗留：邮箱验证码确认（并在后端更新数据库）、openid相关

* web前端

* [ ] 完成管理员登录，用户管理相关功能（修改模板里的js即可，主要任务在交互）
* [ ] 完成日志功能

* 后端

- [ ] 和小程序前端沟通交互api，设计不同函数返回需要的信息
  * 获得/修改当前用户的基本信息（认证的邮箱、个性签名/描述等）done
  * 获得当前用户的加入的所有组织、增加和删除加入的组织  
  * 获得当前版块下的所有组织 done
  * 获得指定组织的基本信息（名称、描述、创建时间、头像、负责人）done
  * ~~获得指定组织的所有活动~~
  * 获得指定组织的所有管理员 done
  * 获得当前用户管理的组织 
    * 若`7 11 14`未完成，组织信息/活动/管理员的修改功能可以暂时不做，视时间而定
* …
  
- [ ] 同上，web端和后端交互
  * 验证管理员账号登录
  * 获得所有用户
  * 修改/删除某个用户
  * ~~在登录的前提下注册新管理员账号~~
* 获得当前所有日志、更新日志内容
  * …
  
- [x] 根据发现的问题更新数据库设计

* 概要文档

不急，下下周直接照着需求文档写



* 会议计划讨论内容

- [x] 小程序页面进一步讨论
  * 例如:把组织管理（15~17）挪到组织详情页（9）？√
- [x] web端日志文件范围
- [x] 本周具体计划（上文）
- [x] 具体分工



### 本周人员分工

| 人员     | 工作                                       | 进展           |
| -------- | ------------------------------------------ | -------------- |
| 乐洋     | 小程序前端（页面框架、样式、页面3，8，14） | 完成           |
| 史鑫杰   | web前端                                    | 完成管理员登录 |
| 开聚实   | 小程序前端（页面框架、样式，页面4,9）      | 完成           |
| 王肇凯   | 小程序前端（js、交互）；周报、汇报ppt      | 完成           |
| 王佳瑞   | 后端（交互、服务器部署）                   | 完成           |
| 李永毅   | 后端（交互、服务器部署）                   | 完成           |
| 全体成员 | 概要文档                                   | 未完成         |





## Week5 4.16-4.22

### TODO

* 周报里的本周计划

* [ ] 用户端实现活动发布、查看、加入功能

* [ ] 用户端实现活动日程管理和提醒功能

* [ ] 管理端实现组织管理功能

* [ ] 管理端实现审核与编辑活动功能

* 小程序前端

* [x] 按钮设置hover

* [x] 遗留功能：
  * [x] 关注、取消关注组织
  * [x] 用户信息显示和编辑
  * [x] ~~每个页面遗留的问题（见wechat readme）~~
  
  ~~统一vant样式（如统一按钮组件、输入框、…）~~
  
  * maybe later...
  
* [ ] 通知提醒功能

* [ ] 新页面：`5 10 11 12 13`   — **primary**
  * 5和9的活动列表类似
  * 11和8类似
  * 12和9的活动列表类似
  * 10和9的详情部分类似
  * 13和14类似

- [x] 在后端接口文档里写明API需求
  * 获取版块下的活动
  * 新建活动
  * 修改活动
  * 删除活动
  * 用户加入、退出活动

* web前端

- [x] 遗留：管理员注册、用户管理
- [ ] 组织管理功能
- [ ] 活动审核编辑功能
- [x] 需要截图进行汇报，最好能部署后端从而录视频展示
- [x] 在后端接口文档里写明API需求

* 后端

- [x] 对接相应API

~~部署服务器（如果网站备案完成）见上周TODO~~

* 概要文档 — **primary**

- [x] **完成概要文档初稿**

  * 功能分组：普通用户、组织管理员、组织负责人、超级管理员
- 会议讨论内容

- [x] 演示如何在本地部署后端，并进行前端调试
- [x] 回顾一下小程序每个页面的问题
- [x] 有请杰哥介绍web端进展和问题
- [x] **概要文档分工及写作计划**
- [x] 开发分工
  - [x] web端是否需要增加人手？



**允许开发工作有所滞后：应以概要文档优先**

**本周需要爆肝**



### 本周人员分工

| 人员     | 工作                                  | 进展 |
| -------- | ------------------------------------- | ---- |
| 乐洋     | 小程序/web；概要文档3                 | 完成 |
| 史鑫杰   | web；概要文档6                        | 完成 |
| 开聚实   | 小程序/web；概要文档3                 | 完成 |
| 王肇凯   | 小程序；概要文档45                    | 完成 |
| 王佳瑞   | 后端/web；周报、汇报ppt；概要文档1278 | 完成 |
| 李永毅   | 后端/web；概要文档1278                | 完成 |
| 全体成员 | 概要文档                              | 完成 |



## Week6 4.23-4.29

### 周报上的任务

* 遗留

- [x] 用户端活动编辑、查看相关js
- [x] 活动加入
- [ ] 用户端活动日程管理、提醒
- [x] 管理端组织管理
- [x] 管理端活动编辑

* 本周

- [x] 用户端活动评论
- [ ] 用户端个性化推荐
- [x] 管理端评论管理



### TODO

- [x] 代码push到软开云

* 小程序前端

- [x] 视图层：新页面`1 5 10 15`
  - [x] 10：主要是评论列表
  - [x] 1和10优先
- [x] 逻辑层（js）：遗留的`10 11 12 13`+新页面
  - [x] new-act
  - [x] act-list
  - [x] act-detail

* web端

- [x] 管理端组织管理
- [x] 管理端活动管理
- [x] 管理端评论管理

* 后端

- [x] 评论相关api
  - [x] 增删改查活动评论
- [ ] 推荐算法
  * 可以先写一个baseline的辣鸡版本
  * 比如直接按热度排序
  * ~~比如直接定义一个特征向量然后找距离最小的~~

* 会议讨论内容

- [x] 上述计划安排
- [x] 关于服务器部署
- [x] 推荐算法怎么搞 瞎搞
- [x] 更新分工
  - [x] 多一个人来写js？
  - [x] 多一个人来搞web端？





### 本周人员分工

| 人员   | 工作                      | 进展 |
| ------ | ------------------------- | ---- |
| 乐洋   | 小程序js                  |      |
| 史鑫杰 | web                       |      |
| 开聚实 | web                       |      |
| 王肇凯 | 小程序js                  |      |
| 王佳瑞 | 后端、推荐                |      |
| 李永毅 | 后端、推荐；周报、汇报ppt |      |







## Week7 4.30-5.6

### 周报上的任务

* 遗留

- [ ] 用户端活动日程管理、提醒
- [ ] 用户端评论编辑
- [ ] 用户端推荐列表显示

* 本周

- [ ] 用户端日程表形式查看活动
- [ ] 用户端地图形式查看活动
- [x] 管理端没了，想不到吧！



### TODO

* 小程序前端

- [ ] 新页面：推荐、地图、日程表、成员管理
- [ ] 遗留功能：关注（活动列表）、新建评论（编辑评论）

* 管理端

- [ ] 参考readme里的todo和bug
- [ ] 进一步测试和优化

* 后端

- [ ] 推荐算法
- [ ] 提醒功能
- [ ] 对接接口
  - [ ] 以开始日期为key返回活动列表
  - [ ] 

* 其他

- [ ] 准备下周概要文档答辩

* 会议讨论内容

- [ ] 计划安排
- [ ] 推荐算法
- [ ] alpha版、beta版功能讨论



### 本周人员分工

| 人员   | 工作                  | 进展 |
| ------ | --------------------- | ---- |
| 乐洋   | 小程序；周报、汇报ppt |      |
| 史鑫杰 | web                   |      |
| 开聚实 | 小程序                |      |
| 王肇凯 | 小程序                |      |
| 王佳瑞 | 后端、推荐            |      |
| 李永毅 | 后端、推荐            |      |







## 后续计划

### Alpha版核心功能

* 主要参见周报整体计划
* 还包括组织管理员、负责人相关的操作
* 还需新增的页面：
  * 成员管理（搜索成员并添加、删除现有成员、转让负责人）
  * 评论新建/修改

### Beta版计划新增功能

* 小程序端
  * 组织相关
    * 创建组织需要审核
    * 上传、修改组织头像
    * 组织发通知公告？
  * 更新UI设计
  * 活动&组织
    * 活动/组织分享、导出为二维码、扫码跳转至活动/组织页面
    * 搜索活动/组织功能
  * 活动相关
    * 活动信息中上传图片（e.g. 群聊二维码）
    * 活动地址和分类设置
    * 活动审核？
  * 评论相关
    * 点赞？置顶？回复？
    * 按点赞数量排序？
    * 分页显示？
  * 提醒功能绑定到服务号消息
  * 增加各种数据检查
    * 组织名称为空，
    * 活动人数不合法
    * 活动时间不合法（结束早于开始，或晚于当前时间）
    * etc（参见概要文档的约定、出错部分）
* web端
  * 部署到域名

* 后端
  * 更好的推荐算法
  * 运行博雅脚本，自动更新博雅活动
  * 各种API报错检查等，例如组织名称不能为空，未登录/无权限，网络错误
    * 网络错误导致的bug：如先后发“创建组织”“增加创始人为管理员”两个请求，若中间中断则组织无管理员
    * 后端“原子操作”无法中断
  * 安全相关：例如获取所有用户信息等各种api需要验证token

